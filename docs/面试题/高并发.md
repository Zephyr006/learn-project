### 如何保证分布式缓存一致性

- 设置缓存过期时间，缓存过期后自然会被更新
- 采用**延时双删策略**：在更新数据库之前删除缓存=>更新数据库=>延时等待其他线程=>再次删除缓存

### CPU的缓存一致性 - MESI协议

MESI协议保证了每个缓存中使用的共享变量的副本是一致的。它核心的思想是：当CPU写数据时，如果发现操作的变量是共享变量，即在其他CPU中也存在该变量的副本，会发出信号通知其他CPU将该变量的缓存行置为无效状态，因此当其他CPU需要读取这个变量时，发现自己缓存中缓存该变量的缓存行是无效的，那么它就会从内存重新读取。

（另外一种硬件层面的解决是总线锁）

